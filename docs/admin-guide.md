# คู่มือการใช้งานระบบ TRIPIRA Map Profile — Admin
> สำหรับ: ผู้ดูแลระบบ (Administrator)  
> เวอร์ชัน: 1.0 | อัปเดต: กุมภาพันธ์ 2569

---

## 1. การเข้าสู่ระบบ

### 1.1 URL สำหรับ Admin
```
https://[your-domain]/admin/login
```

### 1.2 ขั้นตอนการ Login
1. เปิดเบราว์เซอร์ไปที่ `/admin/login`
2. กรอก **Email** และ **Password** ที่ได้รับจากผู้ดูแลระบบหลัก
3. กด **"เข้าสู่ระบบ"**
4. ระบบจะพาไปยัง Admin Dashboard อัตโนมัติ

> ⚠️ หากลืมรหัสผ่าน ให้ติดต่อผู้ดูแลระบบหลักเพื่อ Reset ผ่าน Supabase Authentication

---

## 2. Admin Dashboard — ภาพรวม

หลัง Login สำเร็จ จะเห็นเมนูด้านซ้าย ประกอบด้วย:

| เมนู | หน้าที่ |
|------|---------|
| **Projects** | จัดการโครงการทั้งหมด |
| **Clients** | จัดการข้อมูลลูกค้า |
| **Banner** | ตั้งค่า Hero Banner หน้าแผนที่ |
| **Featured** | กำหนดโครงการเด่น |
| **3D Models** | อัปโหลด/จัดการโมเดล 3 มิติ |
| **Site Settings** | ตั้งค่าทั่วไปของเว็บไซต์ |

---

## 3. การจัดการโครงการ (Projects)

### 3.1 เพิ่มโครงการใหม่
1. ไปที่เมนู **Projects**
2. กดปุ่ม **"เพิ่มโครงการ"**
3. กรอกข้อมูล:
   - **ชื่อโครงการ** (จำเป็น)
   - **ประเภทงาน** — เลือกจาก dropdown
   - **จังหวัด** (จำเป็น)
   - **ปี พ.ศ.**
   - **ลูกค้า** — เลือกจากรายการที่มี
   - **พิกัด (Lat/Lng)** — สำหรับแสดงบนแผนที่
   - **คำอธิบายโครงการ**
   - **รูปภาพ** — อัปโหลดได้หลายรูป
4. กด **"บันทึก"**

### 3.2 แก้ไขโครงการ
1. คลิกที่ชื่อโครงการในรายการ
2. แก้ไขข้อมูลที่ต้องการ
3. กด **"บันทึก"**

### 3.3 ลบโครงการ
1. คลิกไอคอน **ถังขยะ** ข้างชื่อโครงการ
2. ยืนยันการลบ

> ⚠️ การลบโครงการ**ไม่สามารถกู้คืนได้** กรุณาตรวจสอบก่อนลบ

### 3.4 สถานะโครงการ
- **active** — แสดงบนแผนที่สาธารณะ
- **inactive** — ซ่อนจากผู้ใช้ทั่วไป

---

## 4. การจัดการลูกค้า (Clients)

### 4.1 เพิ่มลูกค้าใหม่
1. ไปที่เมนู **Clients**
2. กดปุ่ม **"เพิ่มลูกค้า"**
3. กรอกข้อมูล:
   - **ชื่อบริษัท/องค์กร** (จำเป็น)
   - **คำอธิบาย**
   - **เว็บไซต์**
   - **โลโก้** — อัปโหลดไฟล์รูปภาพ
4. กด **"บันทึก"**

### 4.2 Key Clients
- ลูกค้าที่ทำเครื่องหมายเป็น **Key Client** จะแสดงในแถบพิเศษบนหน้า Clients
- เปิด/ปิดได้ที่ตัวเลือก `is_key_client` ในฟอร์มแก้ไข

---

## 5. การตั้งค่า Banner (Homepage Banner)

Banner คือแถบข้อมูลที่แสดงด้านบนของหน้าแผนที่

### 5.1 ข้อมูลที่แก้ไขได้
| ฟิลด์ | ความหมาย |
|-------|----------|
| **เปิด/ปิด Banner** | Toggle แสดง/ซ่อน Banner |
| **ข้อความหัวเรื่อง** | Headline ขนาดใหญ่ |
| **ข้อความรอง** | Sub-message ด้านบน |
| **CTA Label** | ข้อความปุ่ม Call-to-Action |
| **CTA Link** | URL ที่ปุ่มพาไป |
| **รูปพื้นหลัง** | Background image ของ Banner |

### 5.2 การอัปโหลดรูปพื้นหลัง
1. คลิก **"เลือกรูปภาพ"**
2. เลือกไฟล์ JPG/PNG (แนะนำขนาดไม่เกิน 2MB)
3. ระบบจะอัปโหลดขึ้น Supabase Storage อัตโนมัติ
4. กด **"บันทึก"**

---

## 6. โมเดล 3D (3D Models)

### 6.1 การอัปโหลดโมเดล
1. ไปที่เมนู **3D Models**
2. กดปุ่ม **"อัปโหลดโมเดล"**
3. เลือกไฟล์ `.glb` หรือ `.gltf`
4. เชื่อมโยงกับ **โครงการ** ที่ต้องการ
5. ตั้งค่า:
   - **มาตราส่วน (Scale)**
   - **การหมุน (Rotation)**
   - **พิกัดบนแผนที่**
6. กด **"บันทึก"**

### 6.2 การดูโมเดล 3D บนแผนที่
- ผู้ใช้คลิกโครงการที่มีโมเดล → กดปุ่ม **"View 3D"** ใน Side Panel
- โมเดลจะแสดงซ้อนบนแผนที่ Mapbox

---

## 7. Featured Projects

กำหนดโครงการที่ต้องการ **ไฮไลท์** บนหน้าแรก:
1. ไปที่เมนู **Featured**
2. เลือกโครงการจากรายการ
3. กด **"เพิ่มเป็น Featured"**
4. ลากเพื่อเรียงลำดับการแสดงผล

---

## 8. Site Settings

ตั้งค่าทั่วไปของเว็บไซต์:
- **ชื่อเว็บไซต์**
- **Logo URL**
- **Contact Email**
- **Social Media Links**

---

## 9. การทดสอบระบบ (สำหรับ Tester)

### Checklist การทดสอบ

#### แผนที่ (Map Page)
- [ ] แผนที่โหลดแสดงพิน/cluster ได้ปกติ
- [ ] คลิก Cluster แล้ว Zoom เข้าได้
- [ ] คลิก Pin โครงการแล้ว Side Panel เปิดได้
- [ ] กรองโครงการด้วย Filter Panel ได้ (ประเภท/จังหวัด/ปี/ลูกค้า)
- [ ] ปุ่ม "ดูรายละเอียด" พาไปหน้าโครงการได้
- [ ] Toggle ผัง Overlay เปิด/ปิดได้
- [ ] ปุ่ม View 3D เปิดโมเดลได้ (เฉพาะโครงการที่มีโมเดล)

#### หน้า Clients
- [ ] แสดงรายชื่อลูกค้าครบถ้วน
- [ ] ค้นหาลูกค้าได้
- [ ] Filter ตาม Sector ได้
- [ ] Monogram badge แสดงถูกต้อง

#### Admin
- [ ] Login/Logout ได้ปกติ
- [ ] เพิ่ม/แก้ไข/ลบ Project ได้
- [ ] เพิ่ม/แก้ไข/ลบ Client ได้
- [ ] แก้ไข Banner ได้และเห็นการเปลี่ยนแปลงบนหน้าแผนที่
- [ ] อัปโหลดรูปภาพได้

---

## 10. การรายงานปัญหา

หากพบปัญหาหรือ Bug กรุณาแจ้ง:
1. **หน้าที่พบปัญหา** (URL)
2. **ขั้นตอนที่ทำก่อนพบปัญหา**
3. **Screenshot** หรือ **Error message** ที่เห็น
4. **เบราว์เซอร์และเวอร์ชัน**

ส่งมาที่: `kiattikun@trpra.com`

---

## 11. ข้อมูลเพิ่มเติม

| รายการ | ข้อมูล |
|--------|--------|
| **Platform** | Next.js 16 + Supabase + Mapbox GL JS |
| **Database** | Supabase PostgreSQL |
| **Storage** | Supabase Storage (รูปภาพ, โมเดล 3D) |
| **Authentication** | Supabase Auth (Email/Password) |
| **Map** | Mapbox GL JS |

---

*คู่มือนี้จัดทำโดย TRIPIRA Development Team*
